[gd_scene load_steps=14 format=3 uid="uid://c1ss72v31rhec"]

[ext_resource type="PackedScene" uid="uid://ba6xyqiidsic4" path="res://scenes/picocar.tscn" id="1_efre1"]
[ext_resource type="Script" path="res://scripts/props/lookat_camera.gd" id="1_fev4h"]
[ext_resource type="PackedScene" uid="uid://bdm7x5kots6yv" path="res://scenes/ui/end_game_panel.tscn" id="1_lm331"]
[ext_resource type="Script" path="res://scripts/follow.gd" id="1_tdgni"]
[ext_resource type="Script" path="res://scripts/level/level_objective.gd" id="5_jykah"]
[ext_resource type="PackedScene" uid="uid://dlcl4g8eeahy7" path="res://scenes/props/traffic_cone.tscn" id="6_8ye1h"]
[ext_resource type="Script" path="res://scripts/level/level_logic.gd" id="7_2r1ou"]
[ext_resource type="PackedScene" uid="uid://btsndqkxonpfh" path="res://scenes/props/parking_area.tscn" id="7_xfbd8"]
[ext_resource type="PackedScene" uid="uid://1aps6snaxwys" path="res://scenes/levels/level_chunks/world1/multistorey.tscn" id="9_x1o66"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_odfnc"]
sky_curve = 0.252269
ground_bottom_color = Color(0.466667, 0.576471, 0.866667, 1)
ground_curve = 0.101965

[sub_resource type="Sky" id="Sky_ukivk"]
sky_material = SubResource("ProceduralSkyMaterial_odfnc")

[sub_resource type="Environment" id="Environment_h20ge"]
background_mode = 2
sky = SubResource("Sky_ukivk")
sdfgi_use_occlusion = true
glow_enabled = true
volumetric_fog_enabled = true
volumetric_fog_density = 0.0338
volumetric_fog_albedo = Color(0.890196, 0.890196, 0.890196, 1)
volumetric_fog_emission = Color(0.494118, 0.619608, 0.819608, 1)

[sub_resource type="Resource" id="Resource_hvpg7"]
script = ExtResource("5_jykah")
max_obstacles_hit = 1

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_h20ge")

[node name="ui" type="CanvasLayer" parent="."]

[node name="end_game_panel" parent="ui" instance=ExtResource("1_lm331")]

[node name="obstacles_counter" parent="ui/end_game_panel/list/obstacle_counter_container" index="0" node_paths=PackedStringArray("level_logic")]
level_logic = NodePath("../../../../../level_logic")

[node name="level_logic" type="Node" parent="."]
script = ExtResource("7_2r1ou")
objective = SubResource("Resource_hvpg7")

[node name="player_camera" type="Node3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 5, 0.5, -7)
script = ExtResource("1_tdgni")
target = NodePath("../picocar")

[node name="Camera3D" type="Camera3D" parent="player_camera" node_paths=PackedStringArray("target")]
transform = Transform3D(-1.62921e-07, 0.917332, -0.398123, 0, 0.398123, 0.917332, 1, 1.49452e-07, -6.48625e-08, -2.20013, 5.06941, -4.76837e-07)
size = 17.0
near = 0.005
script = ExtResource("1_fev4h")
target = NodePath("../../picocar")

[node name="picocar" parent="." instance=ExtResource("1_efre1")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0.5, -7)
colour = Color(1, 0.368627, 0.12549, 1)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.707107, 0.5, -0.5, 0, 0.707107, 0.707107, 0.707107, -0.5, 0.5, -7, 5.85145, 6.04361)
light_energy = 1.323
light_angular_distance = 5.62
shadow_enabled = true
shadow_blur = 0.6

[node name="obstacles" type="Node3D" parent="."]

[node name="traffic_cone" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -9)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone2" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -9)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone3" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -8)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone4" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -7)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone5" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -6)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone6" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0.5, -9)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone7" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -8)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone8" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -7)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone9" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -6)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone11" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -5)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone12" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -5)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone13" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -4)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone14" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -4)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone15" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -3)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone16" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -3)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone17" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -2)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone18" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -2)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone19" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, -1)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone20" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, -1)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone21" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 0)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone22" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 0)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone23" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 1)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone24" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 1)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone25" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 2)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone26" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 2)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone27" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 3)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone28" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 3)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone29" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 4)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone30" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 4)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone31" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 5)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone32" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 5)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone33" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 6)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone34" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 6)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone35" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 8)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone36" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 8)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone37" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 7)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone38" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 7)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone39" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 9)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone41" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0.5, 9)
level_logic = NodePath("../../level_logic")

[node name="traffic_cone40" parent="obstacles" node_paths=PackedStringArray("level_logic") instance=ExtResource("6_8ye1h")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.5, 9)
level_logic = NodePath("../../level_logic")

[node name="parking_area" parent="." instance=ExtResource("7_xfbd8")]
transform = Transform3D(1.3, 0, 0, 0, 1.3, 0, 0, 0, 2.64, 5, 0.51, 7)

[node name="level_base" parent="." instance=ExtResource("9_x1o66")]

[connection signal="complete" from="level_logic" to="ui/end_game_panel" method="_on_level_logic_complete"]
[connection signal="parked" from="parking_area" to="level_logic" method="on_parked"]

[editable path="ui/end_game_panel"]
